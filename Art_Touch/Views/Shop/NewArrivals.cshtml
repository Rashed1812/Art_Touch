@model List<DAL.Data.Models.Product>
@{
    ViewData["Title"] = "New Arrivals";
    Layout = "~/Views/Shared/_ShopLayout.cshtml";
}

<div style="padding: 80px 0; background: #f8f9fa; min-height: 80vh;">
    <div class="container">
        <div style="margin-bottom: 40px; text-align: center;">
            <h1 style="font-size: 36px; font-weight: bold; color: #333; margin-bottom: 15px;">New Arrivals</h1>
            <p style="font-size: 16px; color: #666; max-width: 600px; margin: 0 auto;">
                Discover the latest additions to our collection. Fresh styles, new trends, and must-have pieces for the modern woman.
            </p>
        </div>

        @if (!Model.Any())
        {
            <div style="text-align: center; padding: 60px 20px;">
                <i class="fas fa-star" style="font-size: 64px; color: #ddd; margin-bottom: 20px;"></i>
                <h2 style="font-size: 24px; color: #666; margin-bottom: 15px;">No new arrivals yet</h2>
                <p style="color: #999; margin-bottom: 30px;">Check back soon for the latest styles!</p>
                <a href="@Url.Action("Products", "Shop")" class="btn" style="background: #e91e63; color: white; padding: 12px 30px; border-radius: 25px; text-decoration: none; font-weight: 500;">
                    Browse All Products
                </a>
            </div>
        }
        else
        {
            <div class="products-grid">
                @foreach (var product in Model)
                {
                    <div class="product-card">
                        <div class="product-image">
                            <span class="product-badge new">New</span>
                            <img src="@(product.Images?.Any() == true ? product.Images.First().ImageUrl : "/images/placeholder-dress.jpg")" 
                                 alt="@product.Name" 
                                 onerror="this.src='/images/placeholder-dress.jpg'; this.onerror=null;" />
                            <div class="product-overlay">
                                <a href="@Url.Action("ProductDetails", "Shop", new { id = product.Id })" class="btn btn-view">View Details</a>
                                <button class="btn btn-add-to-cart" data-product-id="@product.Id" style="background: #e91e63; color: white; border: none; padding: 8px 20px; border-radius: 5px; margin-top: 10px; cursor: pointer;">
                                    <i class="fas fa-shopping-cart"></i> Add to Cart
                                </button>
                            </div>
                        </div>
                        <div class="product-info">
                            <h3>@product.Name</h3>
                            <p class="product-category">@product.Category?.Name</p>
                            <div class="product-price">
                                @if (product.DiscountPrice.HasValue)
                                {
                                    <span class="price-current">$@product.DiscountPrice.Value.ToString("F2")</span>
                                    <span class="price-original">$@product.OriginalPrice.ToString("F2")</span>
                                }
                                else
                                {
                                    <span class="price-current">$@product.OriginalPrice.ToString("F2")</span>
                                }
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add to cart functionality
    const addToCartButtons = document.querySelectorAll('.btn-add-to-cart');
    addToCartButtons.forEach(button => {
        button.addEventListener('click', function() {
            const productId = this.dataset.productId;
            
            fetch('@Url.Action("AddToCart", "Shop")', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `productId=${productId}&quantity=1`
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Update cart count
                    const cartCount = document.querySelector('.cart-count');
                    if (cartCount) {
                        cartCount.textContent = data.cartCount;
                    }
                    
                    // Show success message
                    this.innerHTML = '<i class="fas fa-check"></i> Added!';
                    this.style.background = '#4caf50';
                    setTimeout(() => {
                        this.innerHTML = '<i class="fas fa-shopping-cart"></i> Add to Cart';
                        this.style.background = '#e91e63';
                    }, 2000);
                }
            });
        });
    });
});
</script> 